<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Customer Support Chat</title>
    <style>
        body { font-family: sans-serif; background-color: #f4f7fa; padding: 0; margin: 0; display: flex; justify-content: center; min-height: 100vh; }
        .container { max-width: 600px; width: 100%; background-color: white; box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; }
        .chat-header { background-color: #3f51b5; color: white; padding: 15px; text-align: center; font-size: 1.2em; font-weight: bold; display: flex; align-items: center; justify-content: space-between; }
        .back-link { color: white; text-decoration: none; font-size: 1em; margin-right: 10px; }
        #chat-window { flex-grow: 1; padding: 20px; overflow-y: auto; max-height: 70vh; border-bottom: 1px solid #eee; }
        .message { margin-bottom: 15px; clear: both; max-width: 80%; padding: 10px; border-radius: 18px; line-height: 1.4; }
        .bot-message { background-color: #e8eaf6; color: #3f51b5; float: left; border-bottom-left-radius: 4px; }
        .user-message { background-color: #4CAF50; color: white; float: right; border-bottom-right-radius: 4px; }
        .chat-input { display: flex; padding: 10px; border-top: 1px solid #ccc; }
        #user-input { flex-grow: 1; padding: 10px; border: 1px solid #ccc; border-radius: 20px; margin-right: 10px; font-size: 1em; }
        #send-btn { background-color: #3f51b5; color: white; border: none; padding: 10px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        .initial-prompt { background-color: #f0f4f8; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center; font-size: 0.95em; color: #555; }
    </style>
</head>
<body>

    <div class="container">
        <div class="chat-header">
            <a href="index.html" class="back-link">‚Üê</a>
            <span>ü§ñ AI Assistant Support</span>
            <span style="visibility: hidden;">_</span>
        </div>

        <div id="chat-window">
            <div class="initial-prompt">
                Hello! I am your Nixita-Shop AI Assistant. I can help with account, withdrawal, or bonus questions.
                <br>Try asking: **"What is the minimum withdrawal?"** or **"How much is the fee?"**
            </div>
            
            <div class="message bot-message">
                Welcome! How can I assist you today?
            </div>
        </div>

        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Type your question here...">
            <button id="send-btn">Send</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chatWindow = document.getElementById('chat-window');
            const userInput = document.getElementById('user-input');
            const sendBtn = document.getElementById('send-btn');
            
            // --- EXPANDED AI Response Mapping ---
            const responses = {
                // --- Welcome, Basics, and Tasks ---
                "hello": "Hello! I am your Nixita-Shop AI Assistant. I can help with account, withdrawal, or bonus questions.",
                "task": "Nixita-Shop offers daily tasks and premium investment plans. Go to the **Task Center** on the home page to execute your active plan and generate earnings.",
                "work": "Earnings are generated by executing tasks in the **Task Center**. Daily returns are based on your selected investment level (e.g., Level 1 offers 3%).",
                "earning": "Earnings are generated by executing tasks in the **Task Center**. Daily returns are based on your selected investment level.",
                
                // --- Withdrawal & Fee Keywords (Rs 500 min, 20% fee) ---
                "minimum withdrawal": "The minimum withdrawal amount is **Rs 500**.",
                "min withdraw": "The minimum withdrawal amount is **Rs 500**.",
                "withdrawal fee": "The withdrawal fee is **20%** of the amount you withdraw, deducted automatically.",
                "charge": "The fee for withdrawal is **20%**.",
                "fee": "The fee for withdrawal is **20%** of the withdrawal amount.",
                "how much is the fee": "The fee for withdrawal is **20%**.",
                "how long": "Withdrawals typically take 24 to 48 hours to be credited to your linked bank or wallet account.",
                "withdraw time": "Withdrawals typically take 24 to 48 hours to be credited.",
                
                // --- Bonus & Recharge Keywords ---
                "welcome bonus": "New users receive a **Rs 100 welcome bonus** credited automatically upon sign-up. This bonus counts toward your minimum withdrawal threshold.",
                "initial bonus": "The initial welcome bonus is **Rs 100**.",
                "daily bonus": "The daily check-in bonus is typically **Rs 10** (or similar reward). Click the 'Claim' button on the dashboard daily.",
                "recharge": "To increase your balance and access higher earning plans, please use the **Recharge** button on the dashboard. You can deposit funds using your bank or wallet.",
                
                // --- Account & Settings Keywords ---
                "esewa": "Yes, we support withdrawals to Esewa. Manage your linked mobile number on the **Bank & Wallet Settings** page.",
                "khalti": "Yes, we support Khalti withdrawals. Manage your linked mobile number on the **Bank & Wallet Settings** page.",
                "imepay": "Yes, we support Imepay withdrawals. Manage your linked mobile number on the **Bank & Wallet Settings** page.",
                "wallet": "We support major Nepali digital wallets: **Esewa, Khalti, Imepay, and Prabhupay**. Check the **Bank & Wallet Settings** page to link your number.",
                "change bank": "To change a linked bank account, you must contact human support, as this is a highly secure action.",
                "password": "To change your password, please go to the **Change Password** link in the Account Management section.",
                "profile update": "You can update your username and email on the **Update Profile Details** page.",
                
                // --- Default Fallback ---
                "default": "I'm sorry, I couldn't find a direct answer to that. Please try rephrasing your question with keywords like 'withdrawal fee', 'recharge', 'task', or 'wallet'. You can also contact our human support for complex issues."
            };

            const appendMessage = (text, sender) => {
                const msgDiv = document.createElement('div');
                msgDiv.classList.add('message');
                msgDiv.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
                msgDiv.innerHTML = text;
                chatWindow.appendChild(msgDiv);
                chatWindow.scrollTop = chatWindow.scrollHeight;
            };

            const getBotResponse = (userText) => {
                const lowerText = userText.toLowerCase();
                
                for (const keyword in responses) {
                    if (lowerText.includes(keyword)) {
                        return responses[keyword];
                    }
                }
                return responses["default"];
            };

            const handleSend = () => {
                const text = userInput.value.trim();
                if (text === '') return;

                appendMessage(text, 'user');
                userInput.value = '';

                setTimeout(() => {
                    const response = getBotResponse(text);
                    appendMessage(response, 'bot');
                }, 500); 
            };

            sendBtn.addEventListener('click', handleSend);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleSend();
                }
            });
        });
    </script>
</body>
</html>